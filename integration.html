<!DOCTYPE = html>
<html>
    <!--Webpage title goes here-->
    <head>
        <!--Allows for formatting-->
        <link href="style.css" rel="stylesheet">
        <title>Math Study Page-Integration Practice</title>
        <h1>Math Study Page-Integration Practice</h1>
    </head>
    <header>
        <!--Navigation bar-->
        <nav class = "navigation">
            <h2>Other Subjects</h2>
            <a href = "./index.html">Home</a>
            <a href = "./spanish.html">Spanish Studying</a>
        </nav>
    </header>
    <!--Main page information goes here-->
    <body>
        <!--Navigation bar-->
        <nav class = "math_navigation">
            <h2>Math Topics:</h2>
            <a href = "./math.html">Math Home</a>
            <a href = "./derivatives.html">Derivatives Practice</a>
            <a>Integration Practice</a>
        </nav>
        <!--Everything that pertains to the question is contained within the form-->
        <form class = "study" id = "math_question">
            <!--Adds a label that displays a question-->
            <label class = "question" id = "ask"></label>
            <!--Creates an input called math that only accepts numbers-->
            <input id="math" class = "answer">
            <!--Creates button that calls checkAnswer when clicked-->
            <input type = "button" value = "Check Answer" onclick = "checkAnswer()" class = "verify" id = "check"><span id = "verify"></span>
        </form>
        <p id = 'example'>
        </p>
        <!--Runs javascript function that checks if answer is correct-->
        <script>
            //Declare variables
            let a 
            let n
            let t 
            var integralQuestion
            var integralAnswer1
            var integralAnswer2
            var displayAnswer
            var exampleQuestion
            var exampleAnswer
            //Selects a random question type to ask
            var questionNumber
            var returnValue
            //Formats question and answer
            document.getElementById('ask').style.color = "white"
            document.getElementById('ask').style.fontFamily = "sans-serif"
            document.getElementById('verify').style.display = "block"
            document.getElementById('verify').style.textAlign = "center"
            //Declare variables that tell how many answers are correct
            let correct = 0
            let numAsked = 0
            let percentCorrect = 0
            //Calls reset function to set up the question
            reset()
            //This code is meant to display a response if the response is not null (currently nonfunctional)
            if (returnValue != null) {
                document.getElementById('verify').innerHTML = returnValue
            }
            //Allows for pressing the answer key to run the checkAnswer function (currently nonfunctional)
            //Could be getting math input twice
            var math = document.getElementById('math')
            math.addEventListener("keypress", function(event) {
                if (event.key == "Enter") {
                    event.preventDefault
                    checkAnswer()
                }
            })
            //Function to set up and reset question
            function reset() {
                //Sets random values for question
                a = Math.floor((Math.random()*9)+1)
                n = Math.floor((Math.random()*9)+1)
                t = Math.floor((Math.random()*9)+1)
                //Variables for example question
                a2 = Math.floor((Math.random()*9)+1)
                n2 = Math.floor((Math.random()*9)+1)
                t2 = Math.floor((Math.random()*9)+1)
                //Lists the different integration question types: power rule, natural log, and chain rule
                integralQuestion = [`${a}x<sup>${n}</sup>`,`<span class="f"><div class="n">${a * n}x<sup>${n - 1}</sup></div><div class="d">${a}x<sup>${n}</sup></div></span>`, `${a*n}x<sup>${n-1}</sup>(${a}x<sup>${n}</sup>)<sup>${t}</sup>`]
                //Gives the two (1 for natural log) acceptable answers for each question type
                integralAnswer1 = [`${a / (n + 1)}x^${(n + 1)}+c`, 'ln(' + a + 'x^' + n + ')+c', `1/${t + 1}(${a}x^${n})^${t+1}+c`]
                integralAnswer2 = [`${a}/${(n + 1)}x^${(n + 1)}+c`, 'ln(' + a + 'x^' + n + ')+c', `${1/(t + 1)}(${a}x^${n})^${t+1}+c`]
                //Creates answers that will be shown if user gets question incorrect
                displayAnswer = [`${a}/${(n + 1)}x<sup>${(n + 1)}</sup>+c`, `ln(${a}x<sup>${n}</sup>)+c`, `1/${t + 1}(${a}x<sup>${n}</sup>)<sup>${t+1}</sup>+c`]
                //Creates an example question and answer that, when this program is finished, will be displayed beneath the question
                exampleQuestion = [`${a2}x<sup>${n2}</sup>`,`<span class="f"><div class="n">${a2 * n2}x<sup>${n2 - 1}</sup></div><div class="d">${a}x<sup>${n2}</sup></div></span>`, `${a2*n2}x<sup>${n2-1}</sup>(${a2}x<sup>${n2}</sup>)<sup>${t2}</sup>`]
                exampleAnswer = [`${a2}/${(n2 + 1)}x<sup>${(n2 + 1)}</sup>+c`, `ln(${a2}x<sup>${n2}</sup>)+c`, `1/${t2 + 1}(${a2}x<sup>${n2}</sup>)<sup>${t2+1}</sup>+c`]
                //Chooses which question type to use
                questionNumber = Math.floor(Math.random()*integralQuestion.length)
                //Prints question with randomly-generated values (<sup> tag displays an exponent, and &#8747 displas an integral symbol)
                document.getElementById('ask').innerHTML = `Evaluate the integral &#8747 ${integralQuestion[questionNumber]} dx. Type exponents as x^n, and natural logs as ln(f(x)).`
                //Prints the answer the user's inputs is being checked against to the console
                console.log(`The acceptable answers for this question is ${integralAnswer1[questionNumber]}, ${integralAnswer2[questionNumber]}`)
                //The commented-out line below will print an example question of the same type
                //Its currently commented out since I want to figure out how to provide an explanation along with the example, if I include it at all
                //document.getElementById('example').innerHTML = `The antiderivative of ${exampleQuestion[questionNumber]} is ${exampleAnswer[questionNumber]}.`
                //Clears input space
                document.getElementById('math_question').reset()
            }
            //Function that checks user input
            function checkAnswer() {
                //Gets the user inputs for math1, math2, and math3
                var answer = document.getElementById("math")
                //Formatting (uses same elements as CSS)
                document.getElementById('verify').style.color = "white"
                document.getElementById('verify').style.fontFamily = "sans-serif"
                //Checks if inputs are correct
                if (answer.value == integralAnswer1[questionNumber]) {
                    //Increases number correct by 1
                    correct ++
                    //Increases total questions asked by 1
                    numAsked ++
                    //Updates score
                    percentCorrect = Math.floor((correct/numAsked)*100)
                    //Used to tell user that answer is correct
                    returnValue = `Correct! Your score is ${percentCorrect}%.`
                } else if (answer.value == integralAnswer2[questionNumber]) {
                    //Increases number correct by 1
                    correct ++
                    //Increases total questions asked by 1
                    numAsked ++
                    //Updates score
                    percentCorrect = Math.floor((correct/numAsked)*100)
                    //Used to tell user that answer is correct
                    returnValue = `Correct! Your score is ${percentCorrect}%.`
                } else {
                    //Increases total questions asked by 1
                    numAsked ++
                    //Updates score
                    percentCorrect = Math.floor((correct/numAsked)*100)
                    //Used to tell user that answer is incorrect
                    returnValue = `Incorrect. The correct answer is ${displayAnswer[questionNumber]}. Your answer was ${answer.value}. Your score is ${percentCorrect}%.`
                }
                //Displays feedback
                document.getElementById('verify').innerHTML = returnValue
                //Resets question
                reset()
            }
        </script>
    </body>
</html>